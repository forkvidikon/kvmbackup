## Обьявление виртуальной машины
# ---> name - указание плного имени виртуальной машины. Лучше скопировать из virsh list
#	---> allowed_to_destroy - разрешение на принудительное отключение питания. Некоторые ВМ (например windows) 
# не воспринимают сигнал выключения, когда экран заблокирован, поэтому для их автоматического копирования
# нужно жестко выключать машину. НЕ РЕКОМЕНДУЕТСЯ СТАВИТЬ yes - сущестует вероятность выхода машины
# из строя и/или потери данных. Лучшим ходом будет запрет на автоматическую блокировку экрана или установка
# в планировщике задачи на автоматическое выключение перед запуском резервного копирования (выключить
# машину за пару минут до копирования)
vmachine:
  name: "ubuntu"
  allowed_to_destroy: "no"

## Создание дампа конфигурации
# ---> dump - указание на необходимость создания дампа конфигурации виртуальной машины. Рекомендуется
# ставить yes в случаях, когда бекапится весь диск машины
# ---> patch - директория для хранения дампов конфигурации. ВАЖНО: закрывающий слеш ( / ) в конце пути не ставится
# ---> name - имя дампа (расширение файла не указывается)
# ---> use_date - включить подстановку даты в имя дампа. Рекомендуется ставить yes, иначе дамп будет
# каждый раз перезаписываться
config:
  dump: "yes"
  patch: "/home/vidikon/test-backup/conf"
  name: "ubuntu_conf"
  use_date: "yes"
  
## Создание копии диска
 # ---> full_copy - указание на необходимость создания полной копии диска виртуальной машины.
 # ВАЖНО: данная функция на данный момент работает только с файлами виртуальных дисков,
 # подключаемые диски и LVM разделы не копируются
 # output_file -->
 #  ---> patch - директория для хранения копий виртуальных дисков. ВАЖНО: закрывающий слеш ( / ) в конце пути не ставится
 #  ---> name - имя копии виртуального диска. ВАЖНО: в конце необходимо ставить расширение файла. Автоматически оно не подставляется
 #  ---> use_date - включить подстановку даты в имя дампа. Рекомендуется ставить yes, иначе копия диска будет
 # каждый раз перезаписываться
disk:
  full_copy: "yes"
  output_file:
    path: "/home/vidikon/test-backup/disk"
    name: "ubuntu-test.qcow2"
    use_date: "yes"

## Создание снапшота (только для qcow2)
# ---> create_snapshot - создание простого снимка, к которому в последствие можно будет откатиться
# ---> live - создание снимка без выключения виртуальной машины
snapshot:
  create_snapshot: "no"
  live: "yes"

## Логирование
# --> notification - указание на необходимость вести лог работы скрипта
#  ---> patch - директория для хранения логов. ВАЖНО: закрывающий слеш ( / ) в конце пути не ставится
#  ---> name_logfile - имя логфайла
notification: "yes"
  patch: "/home/vidikon/test-backup/log"
  name_logfile: "Log"
